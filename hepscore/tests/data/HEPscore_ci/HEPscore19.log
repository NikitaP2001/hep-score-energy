
[bmk-driver.sh] Parse input arguments '-e 3 -t 1 -c 2 -d'


========================================================================
[bmk-driver.sh] Mon Aug  3 23:37:01 CEST 2020 entering common benchmark driver
========================================================================

[bmk-driver.sh] entering from atlas-kv-bmk.sh

[bmk-driver.sh] benchmark directory BMKDIR=/bmk/atlas-kv:

/bmk/atlas-kv:
total 56
-rw-r--r-- 1 root root   281 Oct 18  2019 version.json
drwxr-xr-x 2 root root  4096 Oct 18  2019 data
-rw-rw-rw- 1 root root   442 Oct 18  2019 DESCRIPTION
-rwxrwxrwx 1 root root  2094 Oct 18  2019 atlas-kv-bmk.sh
-rw-rw-rw- 1 root root 17068 Oct 18  2019 bmk-driver.sh
drwxrwxrwx 3 root root  4096 Oct 18  2019 jobs
-rw-rw-rw- 1 root root  2684 Oct 18  2019 parseResults.sh
-rw-rw-rw- 1 root root   614 Oct 18  2019 preInclude.SingleMuonGenerator.py
drwxrwxrwx 2 root root  4096 Oct 18  2019 sqlite200
-rwxrwxrwx 1 root root    70 Oct 18  2019 test_parser.sh

/bmk/atlas-kv/data:
total 0

/bmk/atlas-kv/jobs:
total 4
drwxrwxrwx 3 root root 4096 Oct 18  2019 good_1
lrwxrwxrwx 1 root root    6 Oct 18  2019 refjob -> good_1

/bmk/atlas-kv/jobs/good_1:
total 1116
-rw-rw-rw- 1 root root     479 Oct 18  2019 atlas-kv_summary.json
-rw-rw-rw- 1 root root    1615 Oct 18  2019 cishortlog.txt
-rw-rw-rw- 1 root root 1118158 Oct 18  2019 cvmfs-atlas.cern.ch.spec.txt
-rw-rw-rw- 1 root root      40 Oct 18  2019 inputs.log
-rw-rw-rw- 1 root root      67 Oct 18  2019 joburl.txt
drwxrwxrwx 2 root root    4096 Oct 18  2019 proc_1
lrwxrwxrwx 1 root root      21 Oct 18  2019 summary.json -> atlas-kv_summary.json
-rw-rw-rw- 1 root root     281 Oct 18  2019 version.json

/bmk/atlas-kv/jobs/good_1/proc_1:
total 1076
-rw-rw-rw- 1 root root 527940 Oct 18  2019 AtlasG4_trf.log
-rw-rw-rw- 1 root root    670 Oct 18  2019 doOneWrapper_1.log
-rw-rw-rw- 1 root root 565437 Oct 18  2019 out_1.log

/bmk/atlas-kv/sqlite200:
total 496
-rw-rw-rw- 1 root root 501760 Oct 18  2019 ALLP200.db
-rw-rw-rw- 1 root root     57 Oct 18  2019 README

[bmk-driver.sh] data directory /bmk/atlas-kv/../data:

/bmk/atlas-kv/../data:
total 0

Default (from atlas-kv-bmk.sh): NCOPIES=64
Default (from atlas-kv-bmk.sh): NTHREADS=1
Default (from atlas-kv-bmk.sh): NEVENTS_THREAD=100

Default (from bmk-driver.sh): USER_NCOPIES=2
Default (from bmk-driver.sh): USER_NTHREADS=1
Default (from bmk-driver.sh): USER_NEVENTS_THREAD=3

Default (from bmk-driver.sh): resultsDir=/results
Default (from bmk-driver.sh): skipSubDir=0
Default (from bmk-driver.sh): DEBUG=1
[bmk-driver.sh] load parseResults.sh (function 'parseResults' is not defined in atlas-kv-bmk.sh)
[bmk-driver.sh] sourcing /bmk/atlas-kv/parseResults.sh


Current value: USER_NCOPIES=2
Current value: USER_NTHREADS=1
Current value: USER_NEVENTS_THREAD=3

Current value: resultsDir=/results
Current value: skipSubDir=0
Current value: DEBUG=1

[bmk-driver.sh] function 'validateInputArguments' not found: use input arguments as given

[bmk-driver.sh] base working directory : /results/atlas-kv-c2-e3-1596490621_1893

Current value: NCOPIES=2
Current value: NTHREADS=1
Current value: NEVENTS_THREAD=3

[bmk-driver.sh] APP=atlas-kv

------------------------------------------------------------------------
[bmk-driver.sh] spawn 2 processes
------------------------------------------------------------------------

[bmk-driver.sh] spawned process 1 with pid 38

[doOneWrapper (1)] Mon Aug  3 23:37:01 CEST 2020 : process 1 started
[doOneWrapper (1)] workdir is /results/atlas-kv-c2-e3-1596490621_1893/proc_1
[doOneWrapper (1)] logfile is /results/atlas-kv-c2-e3-1596490621_1893/proc_1/doOneWrapper_1.log
[doOneWrapper (1)] Mon Aug  3 23:37:01 CEST 2020 : process 1 configured
[doOneWrapper (1)] HOME=/results/atlas-kv-c2-e3-1596490621_1893/proc_1/HOME
[doOneWrapper (1)] current process pid is 38
[doOneWrapper (1)] not inside docker - run doOne as root

[doOne (1)] Mon Aug  3 23:37:01 CEST 2020 starting in /results/atlas-kv-c2-e3-1596490621_1893/proc_1
[bmk-driver.sh] spawned process 2 with pid 115

[doOneWrapper (2)] Mon Aug  3 23:37:01 CEST 2020 : process 2 started
[doOneWrapper (2)] workdir is /results/atlas-kv-c2-e3-1596490621_1893/proc_2
[doOneWrapper (2)] logfile is /results/atlas-kv-c2-e3-1596490621_1893/proc_2/doOneWrapper_2.log
[doOneWrapper (2)] Mon Aug  3 23:37:01 CEST 2020 : process 2 configured
[doOneWrapper (2)] HOME=/results/atlas-kv-c2-e3-1596490621_1893/proc_2/HOME
[doOneWrapper (2)] current process pid is 115
[doOneWrapper (2)] not inside docker - run doOne as root

[doOne (2)] Mon Aug  3 23:37:01 CEST 2020 starting in /results/atlas-kv-c2-e3-1596490621_1893/proc_2

[bmk-driver.sh] Mon Aug  3 23:37:01 CEST 2020 ... waiting for spawned processes with pid's 38 115

Using AtlasProduction/17.8.0.9 [cmt] with platform x86_64-slc6-gcc47-opt
	at /cvmfs/atlas.cern.ch/repo/sw/software/x86_64-slc6-gcc47-opt/17.8.0
Using AtlasProduction/17.8.0.9 [cmt] with platform x86_64-slc6-gcc47-opt
	at /cvmfs/atlas.cern.ch/repo/sw/software/x86_64-slc6-gcc47-opt/17.8.0
[doOne (2)] Mon Aug  3 23:38:59 CEST 2020 completed (status=0)

[doOneWrapper (2)] Mon Aug  3 23:38:59 CEST 2020 : process 2 (pid=115) completed ok

[doOne (1)] Mon Aug  3 23:39:01 CEST 2020 completed (status=0)

[doOneWrapper (1)] Mon Aug  3 23:39:01 CEST 2020 : process 1 (pid=38) completed ok


------------------------------------------------------------------------
[bmk-driver.sh] all 2 processes completed successfully
------------------------------------------------------------------------

[bmk-driver.sh] parse results and generate summary: starting
[bmk-driver.sh] current directory : /results/atlas-kv-c2-e3-1596490621_1893

[parseResults] parse results and generate summary (previous status: 0)
[parseResults] current directory: /results/atlas-kv-c2-e3-1596490621_1893
[parseResults] parsing results from proc_1/out_1.log proc_2/out_2.log

[parseResults] generate json summary
{"copies":2 , "threads_per_copy":1 , "events_per_thread" : 3 , "wl-scores": {"sim": 2.4182} , "wl-stats": {"score": 2.4182, "avg": 1.2091, "median": 1.2091, "min": 1.1161, "max": 1.3021} , "app":{"version":"ci1.1","description":"ATLAS KV: GEANT4 simulation of 100 single muon events, based on Athena version v17.8.0.9","cvmfs_checksum":"bae22a4aff12bfce7e2595cc4b271d77","bmkdata_checksum":"9a62d4782b086a9c74ab6edd38dc0ee3","bmk_checksum":"ed140f7f419ecf3e78e50cedf39e7f20"}}

[bmk-driver.sh] parse results and generate summary: completed (status=0)

[bmk-driver.sh] json file validation: starting
[bmk-driver.sh] lint json file '/results/atlas-kv-c2-e3-1596490621_1893/atlas-kv_summary.json' syntax using jq
{"app":{"bmk_checksum":"ed140f7f419ecf3e78e50cedf39e7f20","bmkdata_checksum":"9a62d4782b086a9c74ab6edd38dc0ee3","cvmfs_checksum":"bae22a4aff12bfce7e2595cc4b271d77","description":"ATLAS KV: GEANT4 simulation of 100 single muon events, based on Athena version v17.8.0.9","version":"ci1.1"},"wl-stats":{"max":1.3021,"min":1.1161,"median":1.2091,"avg":1.2091,"score":2.4182},"wl-scores":{"sim":2.4182},"events_per_thread":3,"threads_per_copy":1,"copies":2}
[bmk-driver.sh] json file validation: completed (status=0)

[bmk-driver.sh] exiting back to atlas-kv-bmk.sh

========================================================================
[bmk-driver.sh] Mon Aug  3 23:39:01 CEST 2020 exiting common benchmark driver (status=0)
========================================================================


[bmk-driver.sh] Parse input arguments '-e 3 -t 1 -c 2 -d'


========================================================================
[bmk-driver.sh] Mon Aug  3 23:39:02 CEST 2020 entering common benchmark driver
========================================================================

[bmk-driver.sh] entering from atlas-kv-bmk.sh

[bmk-driver.sh] benchmark directory BMKDIR=/bmk/atlas-kv:

/bmk/atlas-kv:
total 56
-rw-r--r-- 1 root root   281 Oct 18  2019 version.json
drwxr-xr-x 2 root root  4096 Oct 18  2019 data
-rw-rw-rw- 1 root root   442 Oct 18  2019 DESCRIPTION
-rwxrwxrwx 1 root root  2094 Oct 18  2019 atlas-kv-bmk.sh
-rw-rw-rw- 1 root root 17068 Oct 18  2019 bmk-driver.sh
drwxrwxrwx 3 root root  4096 Oct 18  2019 jobs
-rw-rw-rw- 1 root root  2684 Oct 18  2019 parseResults.sh
-rw-rw-rw- 1 root root   614 Oct 18  2019 preInclude.SingleMuonGenerator.py
drwxrwxrwx 2 root root  4096 Oct 18  2019 sqlite200
-rwxrwxrwx 1 root root    70 Oct 18  2019 test_parser.sh

/bmk/atlas-kv/data:
total 0

/bmk/atlas-kv/jobs:
total 4
drwxrwxrwx 3 root root 4096 Oct 18  2019 good_1
lrwxrwxrwx 1 root root    6 Oct 18  2019 refjob -> good_1

/bmk/atlas-kv/jobs/good_1:
total 1116
-rw-rw-rw- 1 root root     479 Oct 18  2019 atlas-kv_summary.json
-rw-rw-rw- 1 root root    1615 Oct 18  2019 cishortlog.txt
-rw-rw-rw- 1 root root 1118158 Oct 18  2019 cvmfs-atlas.cern.ch.spec.txt
-rw-rw-rw- 1 root root      40 Oct 18  2019 inputs.log
-rw-rw-rw- 1 root root      67 Oct 18  2019 joburl.txt
drwxrwxrwx 2 root root    4096 Oct 18  2019 proc_1
lrwxrwxrwx 1 root root      21 Oct 18  2019 summary.json -> atlas-kv_summary.json
-rw-rw-rw- 1 root root     281 Oct 18  2019 version.json

/bmk/atlas-kv/jobs/good_1/proc_1:
total 1076
-rw-rw-rw- 1 root root 527940 Oct 18  2019 AtlasG4_trf.log
-rw-rw-rw- 1 root root    670 Oct 18  2019 doOneWrapper_1.log
-rw-rw-rw- 1 root root 565437 Oct 18  2019 out_1.log

/bmk/atlas-kv/sqlite200:
total 496
-rw-rw-rw- 1 root root 501760 Oct 18  2019 ALLP200.db
-rw-rw-rw- 1 root root     57 Oct 18  2019 README

[bmk-driver.sh] data directory /bmk/atlas-kv/../data:

/bmk/atlas-kv/../data:
total 0

Default (from atlas-kv-bmk.sh): NCOPIES=64
Default (from atlas-kv-bmk.sh): NTHREADS=1
Default (from atlas-kv-bmk.sh): NEVENTS_THREAD=100

Default (from bmk-driver.sh): USER_NCOPIES=2
Default (from bmk-driver.sh): USER_NTHREADS=1
Default (from bmk-driver.sh): USER_NEVENTS_THREAD=3

Default (from bmk-driver.sh): resultsDir=/results
Default (from bmk-driver.sh): skipSubDir=0
Default (from bmk-driver.sh): DEBUG=1
[bmk-driver.sh] load parseResults.sh (function 'parseResults' is not defined in atlas-kv-bmk.sh)
[bmk-driver.sh] sourcing /bmk/atlas-kv/parseResults.sh


Current value: USER_NCOPIES=2
Current value: USER_NTHREADS=1
Current value: USER_NEVENTS_THREAD=3

Current value: resultsDir=/results
Current value: skipSubDir=0
Current value: DEBUG=1

[bmk-driver.sh] function 'validateInputArguments' not found: use input arguments as given

[bmk-driver.sh] base working directory : /results/atlas-kv-c2-e3-1596490742_3822

Current value: NCOPIES=2
Current value: NTHREADS=1
Current value: NEVENTS_THREAD=3

[bmk-driver.sh] APP=atlas-kv

------------------------------------------------------------------------
[bmk-driver.sh] spawn 2 processes
------------------------------------------------------------------------

[bmk-driver.sh] spawned process 1 with pid 38

[doOneWrapper (1)] Mon Aug  3 23:39:02 CEST 2020 : process 1 started
[doOneWrapper (1)] workdir is /results/atlas-kv-c2-e3-1596490742_3822/proc_1
[doOneWrapper (1)] logfile is /results/atlas-kv-c2-e3-1596490742_3822/proc_1/doOneWrapper_1.log
[doOneWrapper (1)] Mon Aug  3 23:39:02 CEST 2020 : process 1 configured
[doOneWrapper (1)] HOME=/results/atlas-kv-c2-e3-1596490742_3822/proc_1/HOME
[doOneWrapper (1)] current process pid is 38
[doOneWrapper (1)] not inside docker - run doOne as root

[doOne (1)] Mon Aug  3 23:39:02 CEST 2020 starting in /results/atlas-kv-c2-e3-1596490742_3822/proc_1
[bmk-driver.sh] spawned process 2 with pid 115

[doOneWrapper (2)] Mon Aug  3 23:39:02 CEST 2020 : process 2 started
[doOneWrapper (2)] workdir is /results/atlas-kv-c2-e3-1596490742_3822/proc_2
[doOneWrapper (2)] logfile is /results/atlas-kv-c2-e3-1596490742_3822/proc_2/doOneWrapper_2.log
[doOneWrapper (2)] Mon Aug  3 23:39:02 CEST 2020 : process 2 configured
[doOneWrapper (2)] HOME=/results/atlas-kv-c2-e3-1596490742_3822/proc_2/HOME
[doOneWrapper (2)] current process pid is 115
[doOneWrapper (2)] not inside docker - run doOne as root

[doOne (2)] Mon Aug  3 23:39:02 CEST 2020 starting in /results/atlas-kv-c2-e3-1596490742_3822/proc_2

[bmk-driver.sh] Mon Aug  3 23:39:02 CEST 2020 ... waiting for spawned processes with pid's 38 115

Using AtlasProduction/17.8.0.9 [cmt] with platform x86_64-slc6-gcc47-opt
	at /cvmfs/atlas.cern.ch/repo/sw/software/x86_64-slc6-gcc47-opt/17.8.0
Using AtlasProduction/17.8.0.9 [cmt] with platform x86_64-slc6-gcc47-opt
	at /cvmfs/atlas.cern.ch/repo/sw/software/x86_64-slc6-gcc47-opt/17.8.0
[doOne (2)] Mon Aug  3 23:41:01 CEST 2020 completed (status=0)

[doOneWrapper (2)] Mon Aug  3 23:41:01 CEST 2020 : process 2 (pid=115) completed ok

[doOne (1)] Mon Aug  3 23:41:02 CEST 2020 completed (status=0)

[doOneWrapper (1)] Mon Aug  3 23:41:02 CEST 2020 : process 1 (pid=38) completed ok


------------------------------------------------------------------------
[bmk-driver.sh] all 2 processes completed successfully
------------------------------------------------------------------------

[bmk-driver.sh] parse results and generate summary: starting
[bmk-driver.sh] current directory : /results/atlas-kv-c2-e3-1596490742_3822

[parseResults] parse results and generate summary (previous status: 0)
[parseResults] current directory: /results/atlas-kv-c2-e3-1596490742_3822
[parseResults] parsing results from proc_1/out_1.log proc_2/out_2.log

[parseResults] generate json summary
{"copies":2 , "threads_per_copy":1 , "events_per_thread" : 3 , "wl-scores": {"sim": 2.6042} , "wl-stats": {"score": 2.6042, "avg": 1.3021, "median": 1.3021, "min": 1.3021, "max": 1.3021} , "app":{"version":"ci1.1","description":"ATLAS KV: GEANT4 simulation of 100 single muon events, based on Athena version v17.8.0.9","cvmfs_checksum":"bae22a4aff12bfce7e2595cc4b271d77","bmkdata_checksum":"9a62d4782b086a9c74ab6edd38dc0ee3","bmk_checksum":"ed140f7f419ecf3e78e50cedf39e7f20"}}

[bmk-driver.sh] parse results and generate summary: completed (status=0)

[bmk-driver.sh] json file validation: starting
[bmk-driver.sh] lint json file '/results/atlas-kv-c2-e3-1596490742_3822/atlas-kv_summary.json' syntax using jq
{"app":{"bmk_checksum":"ed140f7f419ecf3e78e50cedf39e7f20","bmkdata_checksum":"9a62d4782b086a9c74ab6edd38dc0ee3","cvmfs_checksum":"bae22a4aff12bfce7e2595cc4b271d77","description":"ATLAS KV: GEANT4 simulation of 100 single muon events, based on Athena version v17.8.0.9","version":"ci1.1"},"wl-stats":{"max":1.3021,"min":1.3021,"median":1.3021,"avg":1.3021,"score":2.6042},"wl-scores":{"sim":2.6042},"events_per_thread":3,"threads_per_copy":1,"copies":2}
[bmk-driver.sh] json file validation: completed (status=0)

[bmk-driver.sh] exiting back to atlas-kv-bmk.sh

========================================================================
[bmk-driver.sh] Mon Aug  3 23:41:02 CEST 2020 exiting common benchmark driver (status=0)
========================================================================

